{% extends '@BLOG/layout.html.twig' %}

{% block title %} {{ parent() }} {% endblock %}

{% block container %}
    <div class="container container-article"
        {% block row %}
            <div class="row">
                {% for article in articles %}
                    <div class="col-xs-12 article">
                        <h1>{{ article.title }}</h1>
                        {% for image in article.image %}
                            {% for content in article.content %}
                                {% if content.id == image.id %}
                                    {% if image.src is not empty %}
                                        <figcaption class="modal-image">
                                            <img src="{{ asset('bundles/images/'~image.src ) }}" />
                                            <button class="button-cross glyphicon glyphicon-remove" ></button>
                                        </figcaption>
                                    {% endif %}
                                    {% if content.content is not empty %}
                                        <p class="article-content"> {{ content.content|nl2br  }} </p>
                                    {% endif %}
                                {% endif %}
                            {% endfor %}
                        {% endfor %}
                        <aside>
							<p><b><u> Catégorie(s) associée(s)</u> : </b> 
								{% for category in article.category %}
									<span><a href="{{ path('blog_category_specifique', {category : category.category}) }}"/> {{ category.category }} </a> {% if not loop.last %},{% endif %} </span>
								{% endfor %}
							</p>
							<p>
								Publié le {{ article.date.date|date('d/m/Y') }}
							</p>
                        </aside>
                        <div class="comments">
                            <div class="button-range">
                                <button class="btn btn-lg btn-danger" id="publish">Publier un commentaire</button>
								{% for comment in article.comment %}
									{% if comment.publication !=0 %}
										<button class="btn btn-lg btn-danger" id="see">Voir les commentaires</button>
									{% endif %}
								{% endfor %}
							</div>
                            {{ form_start(form) }}
                                {{ form_label(form.author, 'Auteur') }}
                                {{ form_errors(form.author) }}
                                {{ form_widget(form.author) }}

                                {{ form_label(form.comment, 'Commentaire') }}
                                {{ form_errors(form.comment) }}
                                {{ form_widget(form.comment) }}
                            <input class="btn btn-lg btn-danger" type="submit"/>
                            {{ form_end(form) }}
                        </div>
                        <div class="comments-block">
                            {% for comment in article.comment %}
                                {% if comment.publication == 1 %}
                                    <div class="comment">
                                        <p> {{ comment.comment }} <br /><br />
                                        <b>{{ comment.author }}, le {{ comment.date.date|date('d/m/Y') }}</b></p>
                                    </div>
                                {% endif %}
                            {% endfor %}
                        </div>
                    </div>
                {% endfor %}
            </div>
        {% endblock %}
    </div>
{% endblock %}
{% block footer %}
   {{ parent() }}
{% endblock %}
{% block javascript %}{{ asset('bundles/js/style.js') }} {% endblock %}